<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8" />
  <title>DogScore מבית חיית השדה</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 2em; direction: rtl; background: #f7f7f7; }
    input, button { padding: 10px; font-size: 1em; }
    button { margin-right: 10px; cursor: pointer; }
    .result { background: #fff; border-radius: 8px; padding: 1em; margin-top: 1em; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    .grade { font-size: 2em; font-weight: bold; }
    .grade.A { color: darkgreen; }
    .grade.B { color: green; }
    .grade.C { color: orange; }
    .grade.D { color: orangered; }
    .grade.F { color: red; }
    .grade["A+"] { color: darkslateblue; }
  </style>
</head>
<body>
  <h1>מערכת דירוג DogScore</h1>
  <input type="text" id="query" placeholder="הכנס שם מזון לבדיקה..." size="40" />
  <button onclick="checkScore()">בדוק ציון</button>
  <div id="output"></div>

  <script>
    async function checkScore() {
      const query = document.getElementById('query').value;
      if (!query) return alert('נא להזין שם מוצר.');
      const res = await fetch('http://localhost:3001/api/dogscore', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ query })
      });
      const data = await res.json();
      const out = document.getElementById('output');

      if (data.error) {
        out.innerHTML = `<p style='color:red;'>שגיאה: ${data.error}</p>`;
        return;
      }

      out.innerHTML = `
        <div class="result">
          <div class="grade ${data.grade}">ציון: ${data.grade}</div>
          <p><strong>סיכום:</strong> ${data.summary}</p>
          <p><strong>נקודות:</strong><br>${data.points.map(p => `• ${p}`).join('<br>')}</p>
          <p><strong>פרטים:</strong><br>${data.details.replace(/\n/g, '<br>')}</p>
        </div>`;
    }
  </script>
</body>
</html>
