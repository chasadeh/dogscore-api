<script>
  async function checkScore() {
    const query = document.getElementById('query').value;
    if (!query) return alert('נא להזין שם מוצר.');

    const res = await fetch('https://dogscore-node.onrender.com/api/dogscore', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ productName: query }) // ← שדה נכון
    });

    const data = await res.json();
    const out = document.getElementById('output');

    if (data.error) {
      out.innerHTML = `<p style='color:red;'>שגיאה: ${data.error}</p>`;
      return;
    }

    out.innerHTML = `
      <div class="result">
        <div class="grade ${data.grade}">ציון: ${data.grade}</div>
        <p><strong>סיכום:</strong> ${data.summary || ''}</p>
        <p><strong>נקודות:</strong><br>${(data.points || []).map(p => `• ${p}`).join('<br>')}</p>
        <p><strong>פרטים:</strong><br>${(data.details || []).join('<br>')}</p>
      </div>`;
  }
</script>
